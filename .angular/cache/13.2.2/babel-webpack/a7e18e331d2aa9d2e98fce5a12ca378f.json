{"ast":null,"code":"import jsPDF from 'jspdf';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/get-service/get.service\";\nimport * as i2 from \"@angular/material/form-field\";\nimport * as i3 from \"@angular/material/input\";\nimport * as i4 from \"@angular/common\";\nexport let PdfComponent = /*#__PURE__*/(() => {\n  class PdfComponent {\n    constructor(getService) {\n      this.getService = getService;\n      this.displayedColumns = ['libroIngreso', 'cantidadIngreso', 'fechaIngreso', 'libroSalida', 'cantidadSalida', 'fechaSalida', 'libroExistente', 'cantidadExistente'];\n      this.registroEntrada = [];\n      this.registroExistente = [];\n      this.registroSalida = [];\n      this.desde = '2019-08-01';\n      this.presente = new Date();\n      this.fecha = new Date();\n      this.pasado = this.restarDias(this.fecha, 7);\n    }\n\n    ngOnInit() {\n      this.getService.getRegistrosEntrada(this.desde).subscribe(data => {\n        this.registroEntrada = data;\n      }, error => {\n        console.error(error);\n      });\n      this.getService.getRegistrosExistentes(this.desde).subscribe(data => {\n        this.registroExistente = data;\n      }, error => {\n        console.error(error);\n      });\n      this.getService.getRegistrosSalida().subscribe(data => {\n        this.registroSalida = data;\n      }, error => {\n        console.error(error);\n      });\n    }\n\n    restarDias(fecha, dias) {\n      fecha.setDate(fecha.getDate() - dias);\n      return fecha;\n    }\n\n    cambiarFormatoFecha(fecha) {\n      var date = new Date(fecha);\n      var year = date.getFullYear();\n      var month = date.getMonth() + 1;\n      var dt = date.getDate();\n\n      if (dt < 10) {\n        dt = '0' + dt;\n      }\n\n      if (month < 10) {\n        month = '0' + month;\n      }\n\n      return year + '-' + month + '-' + dt;\n    }\n\n    generarPDF() {\n      var input = document.getElementsByTagName('input');\n      var desde = input[0].value;\n      var hasta = input[1].value;\n      var elaborado = input[2].value;\n\n      if ((desde && hasta && elaborado) != '') {\n        var doc = new jsPDF({\n          orientation: 'l',\n          unit: 'mm',\n          format: 'a4'\n        });\n        doc.text('Instituto Tecnológico Superior de Turismo y Patrimonio \"Yavirac\"', 65, 20);\n        doc.text('Control de Inventario', 120, 30);\n        doc.text('Desde: ' + desde, 15, 45);\n        doc.text('Hasta: ' + hasta, 85, 45);\n        doc.text('Elaborado por: ' + elaborado, 165, 45);\n        doc.rect(15, 55, 95, 10);\n        doc.text('ENTRADA', 45, 62);\n        doc.rect(110, 55, 95, 10);\n        doc.text('SALIDA', 145, 62);\n        doc.rect(205, 55, 85, 10);\n        doc.text('EXISTENTE', 233, 62);\n        doc.setFontSize(14);\n        doc.rect(15, 65, 45, 10);\n        doc.text('Libro', 33, 72);\n        doc.rect(60, 65, 30, 10);\n        doc.text('Fecha', 68, 72);\n        doc.rect(90, 65, 20, 10);\n        doc.setFontSize(10);\n        doc.text('Cantidad', 93, 72);\n        doc.setFontSize(14);\n        doc.rect(110, 65, 45, 10);\n        doc.text('Libro', 127, 72);\n        doc.rect(155, 65, 30, 10);\n        doc.text('Fecha', 163, 72);\n        doc.rect(185, 65, 20, 10);\n        doc.setFontSize(10);\n        doc.text('Cantidad', 188, 72);\n        doc.setFontSize(14);\n        doc.rect(205, 65, 65, 10);\n        doc.text('Libro', 234, 72);\n        doc.rect(270, 65, 20, 10);\n        doc.setFontSize(10);\n        doc.text('Cantidad', 273, 72);\n        doc.setFontSize(8);\n\n        for (var i = 0; i < this.registroEntrada.length; i++) {\n          doc.rect(15, 75 + i * 10, 45, 10);\n          doc.text(this.registroEntrada[i].nombre, 17, 82 + i * 10);\n          doc.rect(60, 75 + i * 10, 30, 10);\n          doc.text(this.cambiarFormatoFecha(this.registroEntrada[i].fecha_creacion), 68, 82 + i * 10);\n          doc.rect(90, 75 + i * 10, 20, 10);\n          doc.text(this.registroEntrada[i].count, 99, 82 + i * 10);\n        }\n\n        for (var i = 0; i < this.registroSalida.length; i++) {\n          doc.rect(110, 75 + i * 10, 45, 10);\n          doc.text(this.registroSalida[i].nombre, 112, 82 + i * 10);\n          doc.rect(155, 75 + i * 10, 30, 10);\n          doc.text(this.cambiarFormatoFecha(this.registroSalida[i].fecha_alquiler), 163, 82 + i * 10);\n          doc.rect(185, 75 + i * 10, 20, 10);\n          doc.text(this.registroSalida[i].count, 195, 82 + i * 10);\n        }\n\n        for (var i = 0; i < this.registroExistente.length; i++) {\n          doc.rect(205, 75 + i * 10, 65, 10);\n          doc.text(this.registroExistente[i].nombre, 207, 82 + i * 10);\n          doc.rect(270, 75 + i * 10, 20, 10);\n          doc.text(this.registroExistente[i].count, 279, 82 + i * 10);\n        }\n\n        doc.save('registro-yaviteca.pdf');\n      } else {\n        alert('Los campos no estan llenos');\n      }\n    }\n\n  }\n\n  PdfComponent.ɵfac = function PdfComponent_Factory(t) {\n    return new (t || PdfComponent)(i0.ɵɵdirectiveInject(i1.GetService));\n  };\n\n  PdfComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PdfComponent,\n    selectors: [[\"app-pdf\"]],\n    decls: 20,\n    vars: 8,\n    consts: [[2, \"text-align\", \"center\"], [1, \"example-container\"], [\"matInput\", \"\", \"placeholder\", \"Fecha desde:\", 3, \"value\"], [\"matInput\", \"\", \"placeholder\", \"Fech hasta:\", 3, \"value\"], [\"matInput\", \"\", \"placeholder\", \"Elaborado\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n    template: function PdfComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Visualizador de PDF\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"hr\");\n        i0.ɵɵelementStart(3, \"h2\", 0);\n        i0.ɵɵtext(4, \"Instituto Superior Tecnol\\u00F3gico de Turismo y Patrimonio \\\"Yavirac\\\"\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"h3\", 0);\n        i0.ɵɵtext(6, \"Registro de control de inventario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 1);\n        i0.ɵɵelementStart(8, \"div\", 1);\n        i0.ɵɵelementStart(9, \"mat-form-field\");\n        i0.ɵɵelement(10, \"input\", 2);\n        i0.ɵɵpipe(11, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-form-field\");\n        i0.ɵɵelement(13, \"input\", 3);\n        i0.ɵɵpipe(14, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-form-field\");\n        i0.ɵɵelement(16, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 0);\n        i0.ɵɵelementStart(18, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function PdfComponent_Template_button_click_18_listener() {\n          return ctx.generarPDF();\n        });\n        i0.ɵɵtext(19, \"Descargar PDF\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind2(11, 2, ctx.pasado, \"yyyy-MM-dd\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind2(14, 5, ctx.presente, \"yyyy-MM-dd\"));\n      }\n    },\n    directives: [i2.MatFormField, i3.MatInput],\n    pipes: [i4.DatePipe],\n    styles: [\".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}.example-container[_ngcontent-%COMP%]{width:97%}\"]\n  });\n  return PdfComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}